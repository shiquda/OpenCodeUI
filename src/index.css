@import "tailwindcss";

@font-face {
  font-family: 'JetBrains Mono';
  src: url('/fonts/JetBrainsMono-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* ============================================
 * Design System - Theme Tokens
 * ============================================
 * 
 * 设计规范：
 * - 所有颜色使用语义化命名
 * - 圆角统一使用 radius-* 令牌
 * - 间距使用 Tailwind 默认 spacing
 */

/* Custom Tailwind Theme */
@theme {
  /* ============================================
   * Background colors
   * ============================================ */
  --color-bg-000: hsl(var(--bg-000));
  --color-bg-100: hsl(var(--bg-100));
  --color-bg-200: hsl(var(--bg-200));
  --color-bg-300: hsl(var(--bg-300));
  --color-bg-400: hsl(var(--bg-400));
  
  /* ============================================
   * Text colors
   * ============================================ */
  --color-text-000: hsl(var(--text-000));
  --color-text-100: hsl(var(--text-100));
  --color-text-200: hsl(var(--text-200));
  --color-text-300: hsl(var(--text-300));
  --color-text-400: hsl(var(--text-400));
  --color-text-500: hsl(var(--text-500));
  --color-text-600: hsl(var(--text-600));
  
  /* ============================================
   * Accent colors (brand)
   * ============================================ */
  --color-accent-brand: hsl(var(--accent-brand));
  --color-accent-main-000: hsl(var(--accent-main-000));
  --color-accent-main-100: hsl(var(--accent-main-100));
  --color-accent-main-200: hsl(var(--accent-main-200));
  --color-accent-secondary-100: hsl(var(--accent-secondary-100));
  
  /* ============================================
   * Semantic colors
   * ============================================ */
  /* Success (green) */
  --color-success-100: hsl(var(--success-100));
  --color-success-200: hsl(var(--success-200));
  --color-success-bg: hsl(var(--success-bg));
  
  /* Warning (orange/yellow) */
  --color-warning-100: hsl(var(--warning-100));
  --color-warning-200: hsl(var(--warning-200));
  --color-warning-bg: hsl(var(--warning-bg));
  
  /* Danger (red) */
  --color-danger-000: hsl(var(--danger-000));
  --color-danger-100: hsl(var(--danger-100));
  --color-danger-200: hsl(var(--danger-200));
  --color-danger-bg: hsl(var(--danger-bg));
  --color-danger-900: hsl(var(--danger-900));
  
  /* Info (blue) */
  --color-info-100: hsl(var(--info-100));
  --color-info-200: hsl(var(--info-200));
  --color-info-bg: hsl(var(--info-bg));
  
  /* ============================================
   * Border colors
   * ============================================ */
  --color-border-100: hsl(var(--border-100));
  --color-border-200: hsl(var(--border-200));
  --color-border-300: hsl(var(--border-300));
  
  /* ============================================
   * Special colors
   * ============================================ */
  --color-oncolor-100: hsl(var(--oncolor-100));
  
  /* ============================================
   * Border Radius - 统一圆角规范
   * ============================================
   * 使用场景：
   * - xs: 小元素如 tag, badge
   * - sm: 按钮, 输入框内部元素
   * - md: 卡片, 下拉菜单
   * - lg: 大卡片, 对话框
   * - xl: 输入框容器, 消息气泡
   * - full: 圆形按钮, 头像
   */
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 20px;
  --radius-full: 9999px;
  
  /* ============================================
   * Shadows
   * ============================================ */
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
  --shadow-float: 0 4px 20px 0 rgb(0 0 0 / 0.15);
  
  /* ============================================
   * Sizing - Collapsible Components
   * ============================================ */
  --collapsed-min-w: 160px;
  --collapsed-max-w: 200px;
  
  /* ============================================
   * Sizing - Message Layout
   * ============================================ */
  --message-user-max-w: 85%;
  --attachment-thumb-w: 140px;
  --attachment-expanded-max-w: 500px;
  --menu-width: 360px;
  
  /* ============================================
   * Fonts
   * ============================================ */
  --font-ui-sans: 'Inter', system-ui, sans-serif;
  --font-ui-serif: 'Georgia', serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
}

/* ============================================
 * CSS Variables - Light Mode (Default)
 * ============================================ */
:root {
  /* Background - 暖调米白色系 */
  --bg-000: 45 40% 99%;       /* 暖白 */
  --bg-100: 45 35% 96%;       /* 米白 */
  --bg-200: 45 30% 93%;       /* 浅米色 */
  --bg-300: 45 25% 90%;       /* 中米色 */
  --bg-400: 45 20% 86%;       /* 深米色 */
  
  /* Text - 暖调深色系 */
  --text-000: 0 0% 100%;      /* 纯白（on-dark） */
  --text-100: 30 10% 15%;     /* 主文本 - 暖黑 */
  --text-200: 30 8% 35%;      /* 次要文本 - 暖灰 */
  --text-300: 30 6% 50%;      /* 辅助文本 */
  --text-400: 30 5% 60%;      /* 占位符 */
  --text-500: 30 4% 70%;      /* 禁用 */
  --text-600: 30 3% 82%;      /* 分隔线 */
  
  /* Accent (brand orange) */
  --accent-brand: 24 90% 50%;
  --accent-main-000: 24 85% 45%;
  --accent-main-100: 24 90% 50%;
  --accent-main-200: 24 95% 55%;
  --accent-secondary-100: 210 85% 50%;
  
  /* Success (green) */
  --success-100: 142 70% 40%;
  --success-200: 142 65% 32%;
  --success-bg: 142 60% 94%;
  
  /* Warning (amber) */
  --warning-100: 38 92% 48%;
  --warning-200: 32 88% 42%;
  --warning-bg: 48 90% 92%;
  
  /* Danger (red) */
  --danger-000: 0 65% 38%;
  --danger-100: 0 72% 48%;
  --danger-200: 0 78% 58%;
  --danger-bg: 0 75% 95%;
  --danger-900: 0 55% 92%;
  
  /* Info (blue) */
  --info-100: 210 85% 48%;
  --info-200: 210 80% 58%;
  --info-bg: 210 90% 95%;
  
  /* Border - 暖调边框 */
  --border-100: 35 15% 82%;
  --border-200: 35 12% 85%;
  --border-300: 35 18% 78%;
  
  /* Special */
  --always-black: 0 0% 0%;
  --always-white: 0 0% 100%;
  --oncolor-100: 0 0% 100%;
}

/* ============================================
 * CSS Variables - Dark Mode (System Preference)
 * ============================================ */
@media (prefers-color-scheme: dark) {
  :root:not([data-mode="light"]) {
    /* Background */
    --bg-000: 30 3% 20%;
    --bg-100: 30 3% 15%;
    --bg-200: 30 3% 12%;
    --bg-300: 30 3% 9%;
    --bg-400: 0 0% 5%;
    
    /* Text */
    --text-000: 0 0% 100%;
    --text-100: 40 20% 95%;
    --text-200: 40 10% 75%;
    --text-300: 40 5% 60%;
    --text-400: 40 3% 50%;
    --text-500: 40 2% 40%;
    --text-600: 40 2% 30%;
    
    /* Accent */
    --accent-brand: 24 70% 55%;
    --accent-main-000: 24 75% 50%;
    --accent-main-100: 24 80% 58%;
    --accent-main-200: 24 85% 62%;
    --accent-secondary-100: 210 80% 60%;
    
    /* Success */
    --success-100: 142 70% 50%;
    --success-200: 142 65% 60%;
    --success-bg: 142 50% 15%;
    
    /* Warning */
    --warning-100: 38 90% 55%;
    --warning-200: 38 85% 65%;
    --warning-bg: 38 50% 15%;
    
    /* Danger */
    --danger-000: 0 85% 65%;
    --danger-100: 0 70% 55%;
    --danger-200: 0 75% 65%;
    --danger-bg: 0 50% 15%;
    --danger-900: 0 50% 25%;
    
    /* Info */
    --info-100: 210 85% 60%;
    --info-200: 210 80% 70%;
    --info-bg: 210 50% 15%;
    
    /* Border */
    --border-100: 40 5% 25%;
    --border-200: 40 5% 30%;
    --border-300: 40 5% 35%;
  }
}

/* ============================================
 * CSS Variables - Dark Mode (Manual Override)
 * ============================================ */
[data-mode="dark"] {
  /* Background */
  --bg-000: 30 3% 20%;
  --bg-100: 30 3% 15%;
  --bg-200: 30 3% 12%;
  --bg-300: 30 3% 9%;
  --bg-400: 0 0% 5%;
  
  /* Text */
  --text-000: 0 0% 100%;
  --text-100: 40 20% 95%;
  --text-200: 40 10% 75%;
  --text-300: 40 5% 60%;
  --text-400: 40 3% 50%;
  --text-500: 40 2% 40%;
  --text-600: 40 2% 30%;
  
  /* Accent */
  --accent-brand: 24 70% 55%;
  --accent-main-000: 24 75% 50%;
  --accent-main-100: 24 80% 58%;
  --accent-main-200: 24 85% 62%;
  --accent-secondary-100: 210 80% 60%;
  
  /* Success */
  --success-100: 142 70% 50%;
  --success-200: 142 65% 60%;
  --success-bg: 142 50% 15%;
  
  /* Warning */
  --warning-100: 38 90% 55%;
  --warning-200: 38 85% 65%;
  --warning-bg: 38 50% 15%;
  
  /* Danger */
  --danger-000: 0 85% 65%;
  --danger-100: 0 70% 55%;
  --danger-200: 0 75% 65%;
  --danger-bg: 0 50% 15%;
  --danger-900: 0 50% 25%;
  
  /* Info */
  --info-100: 210 85% 60%;
  --info-200: 210 80% 70%;
  --info-bg: 210 50% 15%;
  
  /* Border */
  --border-100: 40 5% 25%;
  --border-200: 40 5% 30%;
  --border-300: 40 5% 35%;
}

/* ============================================
 * CSS Variables - Light Mode (Manual Override)
 * ============================================ */
[data-mode="light"] {
  /* Background - 暖调米白色系 */
  --bg-000: 45 40% 99%;       /* 暖白 */
  --bg-100: 45 35% 96%;       /* 米白 */
  --bg-200: 45 30% 93%;       /* 浅米色 */
  --bg-300: 45 25% 90%;       /* 中米色 */
  --bg-400: 45 20% 86%;       /* 深米色 */
  
  /* Text - 暖调深色系 */
  --text-000: 0 0% 100%;      /* 纯白（on-dark） */
  --text-100: 30 10% 15%;     /* 主文本 - 暖黑 */
  --text-200: 30 8% 35%;      /* 次要文本 - 暖灰 */
  --text-300: 30 6% 50%;      /* 辅助文本 */
  --text-400: 30 5% 60%;      /* 占位符 */
  --text-500: 30 4% 70%;      /* 禁用 */
  --text-600: 30 3% 82%;      /* 分隔线 */
  
  /* Accent (brand orange) */
  --accent-brand: 24 90% 50%;
  --accent-main-000: 24 85% 45%;
  --accent-main-100: 24 90% 50%;
  --accent-main-200: 24 95% 55%;
  --accent-secondary-100: 210 85% 50%;
  
  /* Success (green) */
  --success-100: 142 70% 40%;
  --success-200: 142 65% 32%;
  --success-bg: 142 60% 94%;
  
  /* Warning (amber) */
  --warning-100: 38 92% 48%;
  --warning-200: 32 88% 42%;
  --warning-bg: 48 90% 92%;
  
  /* Danger (red) */
  --danger-000: 0 65% 38%;
  --danger-100: 0 72% 48%;
  --danger-200: 0 78% 58%;
  --danger-bg: 0 75% 95%;
  --danger-900: 0 55% 92%;
  
  /* Info (blue) */
  --info-100: 210 85% 48%;
  --info-200: 210 80% 58%;
  --info-bg: 210 90% 95%;
  
  /* Border - 暖调边框 */
  --border-100: 35 15% 82%;
  --border-200: 35 12% 85%;
  --border-300: 35 18% 78%;
  
  /* Special */
  --always-black: 0 0% 0%;
  --always-white: 0 0% 100%;
  --oncolor-100: 0 0% 100%;
}

/* Font Faces - using local fallbacks for now */
@font-face {
  font-family: 'Anthropic Sans';
  src: local('Inter'), local('system-ui'), local('sans-serif');
  font-weight: 100 900;
}

@font-face {
  font-family: 'Anthropic Serif';
  src: local('Georgia'), local('serif');
  font-weight: 100 900;
}

/* Base styles */
body {
  margin: 0;
  font-family: var(--font-ui-sans);
}

/* Theme View Transition (Circular Reveal) */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
  /* 硬件加速优化 */
  will-change: clip-path;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Utility classes */
.no-scrollbar::-webkit-scrollbar {
  display: none !important;
}

.no-scrollbar {
  -ms-overflow-style: none !important;
  scrollbar-width: none !important;
}

/* 常用工具类别名 */
.scrollbar-none {
  -ms-overflow-style: none !important;
  scrollbar-width: none !important;
}

.scrollbar-none::-webkit-scrollbar {
  display: none !important;
}

/* Custom scrollbar - 恢复显示，尽可能使用 overlay */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border-300) / 0.5) transparent;
  overflow-y: overlay; /* 尝试 overlay */
}

/* 兼容性回退 */
@supports not (overflow-y: overlay) {
  .custom-scrollbar {
    overflow-y: auto;
  }
}

/* ============================================
 * Input Textarea + Overlay - 共享样式确保完全对齐
 * ============================================ */
.input-textarea,
.input-overlay {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  font-size: 14px;
  font-weight: 400;
  line-height: 20px;
  letter-spacing: normal;
  white-space: pre-wrap;
  word-break: break-word;
  overflow-wrap: break-word;
  padding: 0;
  margin: 0;
  border: none;
  min-height: 24px;
  max-height: 50vh;
}

.input-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  pointer-events: none;
  overflow: hidden;
}

/* Textarea 特殊处理 - 保证光标对齐 */
textarea.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border-300) / 0.5) transparent;
}

textarea.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  background: transparent;
}

textarea.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border-300) / 0.4);
  border-radius: 99px;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 10px; /* 稍微宽一点以支持透明边框技巧 */
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border-300) / 0.4);
  border-radius: 99px;
  border: 3px solid transparent; /* 透明边框让 thumb 变小并产生间距感 */
  background-clip: padding-box; /* 让背景色只在 content-box 内绘制 */
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--border-300) / 0.7);
}

/* ============================================
 * Panel Scrollbar - 面板统一滚动条样式
 * ============================================
 * 用于面板内容区域，支持水平和垂直滚动
 * 特点：细滚动条、悬浮时显示、不占用布局空间
 */
.panel-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border-300) / 0.3) transparent;
  overflow: auto;
}

/* 尝试使用 overlay 滚动条（不占用空间） */
@supports (overflow: overlay) {
  .panel-scrollbar {
    overflow: overlay;
  }
}

.panel-scrollbar::-webkit-scrollbar {
  width: 8px;
  height: 8px;
  background: transparent;
}

.panel-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.panel-scrollbar::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border-300) / 0.3);
  border-radius: 99px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.panel-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--border-300) / 0.6);
}

.panel-scrollbar::-webkit-scrollbar-corner {
  background: transparent;
}

/**
 * Code scrollbar - 用于代码预览区域
 * 横向滚动条极细且半透明，避免遮挡代码最后一行
 */
.code-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border-300) / 0.25) transparent;
  overflow: auto;
}

@supports (overflow: overlay) {
  .code-scrollbar {
    overflow: overlay;
  }
}

.code-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 4px;
  background: transparent;
}

.code-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.code-scrollbar::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border-300) / 0.25);
  border-radius: 99px;
}

.code-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--border-300) / 0.5);
}

.code-scrollbar::-webkit-scrollbar-corner {
  background: transparent;
}

/* 仅垂直滚动的变体 */
.panel-scrollbar-y {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border-300) / 0.3) transparent;
  overflow-y: auto;
  overflow-x: hidden;
}

@supports (overflow-y: overlay) {
  .panel-scrollbar-y {
    overflow-y: overlay;
  }
}

.panel-scrollbar-y::-webkit-scrollbar {
  width: 8px;
  background: transparent;
}

.panel-scrollbar-y::-webkit-scrollbar-track {
  background: transparent;
}

.panel-scrollbar-y::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border-300) / 0.3);
  border-radius: 99px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.panel-scrollbar-y::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--border-300) / 0.6);
}

/* 仅水平滚动的变体 */
.panel-scrollbar-x {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--border-300) / 0.3) transparent;
  overflow-x: auto;
  overflow-y: hidden;
}

@supports (overflow-x: overlay) {
  .panel-scrollbar-x {
    overflow-x: overlay;
  }
}

.panel-scrollbar-x::-webkit-scrollbar {
  height: 6px;
  background: transparent;
}

.panel-scrollbar-x::-webkit-scrollbar-track {
  background: transparent;
}

.panel-scrollbar-x::-webkit-scrollbar-thumb {
  background-color: hsl(var(--border-300) / 0.3);
  border-radius: 99px;
}

.panel-scrollbar-x::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--border-300) / 0.6);
}

/* Tabs 水平滚动 - 彻底隐藏滚动条 */
.tabs-scrollbar {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
  overflow-x: auto;
  overflow-y: hidden;
}

.tabs-scrollbar::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  background: transparent;
}

/* ============================================
 * Panel Unified Styles - 面板统一样式
 * ============================================
 * 用于 RightPanel 和 BottomPanel 的统一视觉规范
 */

/* 面板统一过渡效果 */
.panel-transition {
  transition-property: width, height, opacity, transform;
  transition-duration: 200ms;
  transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
}

/* 面板统一阴影（可选，用于浮动状态） */
.panel-shadow {
  box-shadow: 
    0 0 0 1px hsl(var(--border-200) / 0.5),
    0 4px 12px hsl(0 0% 0% / 0.08);
}

/* ============================================
 * Mobile Responsive - 移动端适配
 * ============================================
 */

/* 移动端面板覆盖层 */
@media (max-width: 768px) {
  /* 面板默认隐藏 */
  .panel-mobile-hide {
    display: none;
  }
  
  /* 面板全屏覆盖模式 */
  .panel-mobile-overlay {
    position: fixed !important;
    inset: 0 !important;
    width: 100% !important;
    height: 100% !important;
    z-index: 100;
    border: none !important;
  }
  
  /* 移动端面板头部增大点击区域 */
  .panel-mobile-header {
    min-height: 48px;
    padding: 12px 16px;
  }
  
  /* 移动端 resize handle 更大的触摸区域 */
  .panel-resize-handle-mobile {
    width: 16px;
    height: 16px;
  }
}

/* 平板适配 */
@media (min-width: 768px) and (max-width: 1024px) {
  /* 面板最小宽度调整 */
  .panel-tablet-min-w {
    min-width: 280px;
  }
  
  /* 面板最大宽度调整 */
  .panel-tablet-max-w {
    max-width: 50vw;
  }
}

/* Mobile Drawer Animations */
@keyframes fade-in-overlay {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-fade-in-overlay {
  animation: fade-in-overlay 0.3s ease-out forwards;
}

/* Mobile responsive utilities */
.mobile-overlay-backdrop {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(2px);
  z-index: 99;
}

/* Message animations */
@keyframes message-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes message-exit {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0;
    transform: translateY(-8px);
  }
}

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-in-from-bottom {
  from { transform: translateY(8px); }
  to { transform: translateY(0); }
}

@keyframes scale-in {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* Animation utility classes */
.animate-in {
  animation-duration: 200ms;
  animation-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  animation-fill-mode: both;
}

.fade-in {
  animation-name: fade-in;
}

/* Session 切换淡入动画 */
.animate-fade-in {
  animation: fade-in 200ms ease-out;
}

/* Modal 缩放进入动画 */
.animate-scale-in {
  animation: scale-in 200ms cubic-bezier(0.16, 1, 0.3, 1);
}

.slide-in-from-bottom-2 {
  animation-name: slide-in-from-bottom;
}

.scale-in {
  animation-name: scale-in;
}

.duration-200 {
  animation-duration: 200ms;
}

.duration-300 {
  animation-duration: 300ms;
}

/* Custom Animations */
@keyframes breathe {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.7; transform: scale(1); }
}

.animate-breathe {
  animation: breathe 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* ============================================
 * Mention tag styles
 * ============================================ */
.mention-tag {
  font-weight: 500;
}

/* Agent mention - uses accent (orange) */
.mention-tag[data-mention-type="agent"] {
  color: hsl(var(--accent-main-100));
}

/* File mention - uses info (blue) */
.mention-tag[data-mention-type="file"] {
  color: hsl(var(--info-100));
}

/* Folder mention - uses success (green) */
.mention-tag[data-mention-type="folder"] {
  color: hsl(var(--success-100));
}

/* ============================================
 * Content Enter Animation
 * ============================================
 * 内容出现时的流畅渐显动画
 * 使用纯透明度过渡，避免位移带来的"蹦"的感觉
 */
@keyframes content-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-content-in {
  animation: content-in 0.3s ease-out both;
}

/* 子元素依次出现的效果 */
.animate-stagger > * {
  animation: content-in 0.3s ease-out both;
}

.animate-stagger > *:nth-child(1) { animation-delay: 0ms; }
.animate-stagger > *:nth-child(2) { animation-delay: 80ms; }
.animate-stagger > *:nth-child(3) { animation-delay: 160ms; }
.animate-stagger > *:nth-child(4) { animation-delay: 240ms; }
.animate-stagger > *:nth-child(5) { animation-delay: 320ms; }

/* ============================================
 * Border Pulse Animation (InputBox waiting)
 * ============================================ */
@keyframes border-pulse {
  0%, 100% { 
    border-color: hsl(var(--accent-main-100) / 0.5);
  }
  50% { 
    border-color: hsl(var(--accent-main-100) / 0.2);
  }
}

.animate-border-pulse {
  animation: border-pulse 2s ease-in-out infinite;
}


/* ============================================
 * Utility: Linear Fade Mask
 * ============================================ */
.mask-linear-fade {
  mask-image: linear-gradient(to right, transparent, black 10px, black 90%, transparent);
  -webkit-mask-image: linear-gradient(to right, transparent, black 10px, black 90%, transparent);
}

/* ============================================
 * CSS Containment - 优化布局性能，减少 CLS
 * ============================================ */

/* 隔离布局变化，防止子元素影响外部布局 */
.contain-layout {
  contain: layout;
}

/* 完全隔离（用于独立的滚动区域） */
.contain-strict {
  contain: strict;
}

/* 内容隔离（用于动态内容区域） */
.contain-content {
  contain: content;
}
